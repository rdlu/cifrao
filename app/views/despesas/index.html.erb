<h1>Listing despesas</h1>

<table>
  <tr>
    <th>Valor</th>
    <th>Descricao</th>
    <th>Conta origem</th>
    <th>Conta destino</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @despesas.each do |despesa| %>
  <tr>
    <td><%= despesa.valor %></td>
    <td><%= despesa.descricao %></td>
    <td><%= Contum.find(despesa.conta_origem_id).agencia %>
        <%= Contum.find(despesa.conta_origem_id).nro_conta %></td>
    <td><%= Contum.find(despesa.conta_destino_id).agencia %>
        <%= Contum.find(despesa.conta_destino_id).nro_conta %></td>
    <td><%= link_to 'Show', despesa %></td>
    <td><%= link_to 'Edit', edit_despesa_path(despesa) %></td>
    <td><%= link_to 'Destroy', despesa, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
  <tr>
    <td>Total:</td>
    <td><%= @despesas.sum(&:valor) %></td>		
  </tr>
</table>

<br />

<%= link_to 'New Despesa', new_despesa_path %>
